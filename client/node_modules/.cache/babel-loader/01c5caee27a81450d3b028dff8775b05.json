{"ast":null,"code":"import _defineProperty from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Select from'react-select';import makeAnimated from'react-select/animated';import{TextInput,Row,Container}from'react-materialize';import M from'materialize-css/dist/js/materialize.min.js';import{updateCategory}from'../../actions/category';import useResources from'../../utils/useResources';import FileUpload from'../upload/FileUpload';var EditCategory=function EditCategory(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),category=_useState2[0],setCategory=_useState2[1];var title=category.title,thumbnail=category.thumbnail,location=category.location;var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),submittedFileName=_useState4[0],setSubmittedFileName=_useState4[1];var locations=useResources('locations');var animatedComponents=makeAnimated();var current=useSelector(function(state){return state.category.current;});var dispatch=useDispatch();useEffect(function(){if(current){setCategory(current);}document.title='Edit Category';},[current]);var onChange=function onChange(e){setCategory(_objectSpread(_objectSpread({},category),{},_defineProperty({},e.target.name,e.target.value)));};var onSelect=function onSelect(value,action){setCategory(_objectSpread(_objectSpread({},category),{},_defineProperty({},action.name,value)));};var onSubmit=function onSubmit(){dispatch(updateCategory(_objectSpread(_objectSpread({},category),{},{thumbnail:submittedFileName})));M.toast({html:\"\".concat(title,\" updated\")});history.push('categories');};return/*#__PURE__*/React.createElement(Container,{className:\"center mt form-container\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},location&&location.map(function(loc){return/*#__PURE__*/React.createElement(\"li\",{style:{display:'inline'},key:loc.value},loc.label,\",\",' ');}),/*#__PURE__*/React.createElement(Select,{id:\"edit-cat-loc\",name:\"locations\",placeholder:\"Location\",onChange:onSelect,components:animatedComponents,closeMenuOnSelect:false,isMulti:true// value={location}\n,options:locations.map(function(loc){return{value:loc.title,label:loc.title};})}),/*#__PURE__*/React.createElement(TextInput,{id:\"edit-cat-title\",name:\"title\",label:\"Title\",value:title,onChange:onChange,s:12}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(\"img\",{src:thumbnail,alt:\"\",width:\"200\"})),/*#__PURE__*/React.createElement(FileUpload,{updateFileNameToParent:setSubmittedFileName}))));};export default EditCategory;","map":{"version":3,"sources":["/Users/lcer0001/GitHub/biodash/client/src/components/categories/EditCategory.js"],"names":["React","useState","useEffect","useDispatch","useSelector","Select","makeAnimated","TextInput","Row","Container","M","updateCategory","useResources","FileUpload","EditCategory","history","category","setCategory","title","thumbnail","location","submittedFileName","setSubmittedFileName","locations","animatedComponents","current","state","dispatch","document","onChange","e","target","name","value","onSelect","action","onSubmit","toast","html","push","map","loc","display","label"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/animated';\nimport { TextInput, Row, Container } from 'react-materialize';\nimport M from 'materialize-css/dist/js/materialize.min.js';\nimport { updateCategory } from '../../actions/category';\nimport useResources from '../../utils/useResources';\nimport FileUpload from '../upload/FileUpload';\n\nconst EditCategory = ({ history }) => {\n  const [category, setCategory] = useState('');\n  const { title, thumbnail, location } = category;\n\n  const [submittedFileName, setSubmittedFileName] = useState('');\n\n  const locations = useResources('locations');\n\n  const animatedComponents = makeAnimated();\n\n  const current = useSelector((state) => state.category.current);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (current) {\n      setCategory(current);\n    }\n    document.title = 'Edit Category';\n  }, [current]);\n\n  const onChange = (e) => {\n    setCategory({ ...category, [e.target.name]: e.target.value });\n  };\n\n  const onSelect = (value, action) => {\n    setCategory({ ...category, [action.name]: value });\n  };\n\n  const onSubmit = () => {\n    dispatch(updateCategory({ ...category, thumbnail: submittedFileName }));\n    M.toast({ html: `${title} updated` });\n    history.push('categories');\n  };\n\n  return (\n    <Container className=\"center mt form-container\">\n      <Row>\n        <form onSubmit={onSubmit}>\n          {location &&\n            location.map((loc) => {\n              return (\n                <li style={{ display: 'inline' }} key={loc.value}>\n                  {loc.label},{' '}\n                </li>\n              );\n            })}\n          <Select\n            id=\"edit-cat-loc\"\n            name=\"locations\"\n            placeholder=\"Location\"\n            onChange={onSelect}\n            components={animatedComponents}\n            closeMenuOnSelect={false}\n            isMulti\n            // value={location}\n            options={locations.map((loc) => ({\n              value: loc.title,\n              label: loc.title\n            }))}\n          />\n          <TextInput\n            id=\"edit-cat-title\"\n            name=\"title\"\n            label=\"Title\"\n            value={title}\n            onChange={onChange}\n            s={12}\n          />\n          <Row>\n            <img src={thumbnail} alt=\"\" width=\"200\" />\n          </Row>\n          <FileUpload updateFileNameToParent={setSubmittedFileName} />\n        </form>\n      </Row>\n    </Container>\n  );\n};\n\nexport default EditCategory;\n"]},"metadata":{},"sourceType":"module"}