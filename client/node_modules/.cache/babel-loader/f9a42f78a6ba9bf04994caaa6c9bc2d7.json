{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/lcer0001/GitHub/biodash/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{Button,Icon,TextInput}from'react-materialize';import Message from'./Message';var FileUpload=function FileUpload(_ref){var updateFileNameToParent=_ref.updateFileNameToParent;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState('Thumbnail *'),_useState4=_slicedToArray(_useState3,2),filename=_useState4[0],setFilename=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var onChange=function onChange(e){setFile(e.target.files[0]);setFilename(e.target.files[0].name);};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('file',file);_context.prev=3;_context.next=6;return axios.post('/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});case 6:_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](3);if(_context.t0.response.status===500){setMessage('There was a problem with the server');}else{setMessage(_context.t0.response.data.msg);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[3,8]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();updateFileNameToParent(filename);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit},/*#__PURE__*/React.createElement(TextInput,{id:\"add-cat-thumb\",name:\"thumbnail\",type:\"file\",label:filename,onChange:onChange,s:12}),message&&/*#__PURE__*/React.createElement(Message,{msg:message}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:\"blue darken-2 mb\",type:\"submit\"},\"Submit\",/*#__PURE__*/React.createElement(Icon,{right:true},\"send\"))));};export default FileUpload;","map":{"version":3,"sources":["/Users/lcer0001/GitHub/biodash/client/src/components/upload/FileUpload.js"],"names":["React","useState","axios","Button","Icon","TextInput","Message","FileUpload","updateFileNameToParent","file","setFile","filename","setFilename","message","setMessage","onChange","e","target","files","name","onSubmit","preventDefault","formData","FormData","append","post","headers","response","status","data","msg"],"mappings":"idAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,SAAvB,KAAwC,mBAAxC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAgC,IAA7BC,CAAAA,sBAA6B,MAA7BA,sBAA6B,eACzBP,QAAQ,CAAC,EAAD,CADiB,wCAC1CQ,IAD0C,eACpCC,OADoC,8BAEjBT,QAAQ,CAAC,aAAD,CAFS,yCAE1CU,QAF0C,eAEhCC,WAFgC,8BAGnBX,QAAQ,CAAC,EAAD,CAHW,yCAG1CY,OAH0C,eAGjCC,UAHiC,eAKjD,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBN,OAAO,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP,CACAN,WAAW,CAACI,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBC,IAAnB,CAAX,CACD,CAHD,CAKA,GAAMC,CAAAA,QAAQ,2FAAG,iBAAOJ,CAAP,+HACfA,CAAC,CAACK,cAAF,GACMC,QAFS,CAEE,GAAIC,CAAAA,QAAJ,EAFF,CAGfD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBf,IAAxB,EAHe,sCAKPP,CAAAA,KAAK,CAACuB,IAAN,CAAW,SAAX,CAAsBH,QAAtB,CAAgC,CACpCI,OAAO,CAAE,CACP,eAAgB,qBADT,CAD2B,CAAhC,CALO,uFAWb,GAAI,YAAIC,QAAJ,CAAaC,MAAb,GAAwB,GAA5B,CAAiC,CAC/Bd,UAAU,CAAC,qCAAD,CAAV,CACD,CAFD,IAEO,CACLA,UAAU,CAAC,YAAIa,QAAJ,CAAaE,IAAb,CAAkBC,GAAnB,CAAV,CACD,CAfY,oEAAH,kBAARV,CAAAA,QAAQ,6CAAd,CAmBAZ,sBAAsB,CAACG,QAAD,CAAtB,CAEA,mBACE,qDACE,4BAAM,QAAQ,CAAES,QAAhB,eACE,oBAAC,SAAD,EACE,EAAE,CAAC,eADL,CAEE,IAAI,CAAC,WAFP,CAGE,IAAI,CAAC,MAHP,CAIE,KAAK,CAAET,QAJT,CAKE,QAAQ,CAAEI,QALZ,CAME,CAAC,CAAE,EANL,EADF,CASGF,OAAO,eAAI,oBAAC,OAAD,EAAS,GAAG,CAAEA,OAAd,EATd,cAUE,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,SAAS,CAAC,kBAAtC,CAAyD,IAAI,CAAC,QAA9D,wBAEE,oBAAC,IAAD,EAAM,KAAK,KAAX,SAFF,CAVF,CADF,CADF,CAmBD,CAlDD,CAoDA,cAAeN,CAAAA,UAAf","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { Button, Icon, TextInput } from 'react-materialize';\nimport Message from './Message';\n\nconst FileUpload = ({ updateFileNameToParent }) => {\n  const [file, setFile] = useState('');\n  const [filename, setFilename] = useState('Thumbnail *');\n  const [message, setMessage] = useState('');\n\n  const onChange = (e) => {\n    setFile(e.target.files[0]);\n    setFilename(e.target.files[0].name);\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      await axios.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    } catch (err) {\n      if (err.response.status === 500) {\n        setMessage('There was a problem with the server');\n      } else {\n        setMessage(err.response.data.msg);\n      }\n    }\n  };\n\n  updateFileNameToParent(filename);\n\n  return (\n    <>\n      <form onSubmit={onSubmit}>\n        <TextInput\n          id=\"add-cat-thumb\"\n          name=\"thumbnail\"\n          type=\"file\"\n          label={filename}\n          onChange={onChange}\n          s={12}\n        />\n        {message && <Message msg={message} />}\n        <Button variant=\"contained\" className=\"blue darken-2 mb\" type=\"submit\">\n          Submit\n          <Icon right>send</Icon>\n        </Button>\n      </form>\n    </>\n  );\n};\n\nexport default FileUpload;\n"]},"metadata":{},"sourceType":"module"}